# 事件

## 事件流

事件流描述的是从页面中接受事件的顺序。IE的事件流是事件冒泡流，而Netscape(网景浏览器) Communicator的事件流是事件捕获流。

### 事件冒泡

1. 即事件开始时由最具体的元素接受，然后逐级向上传播到较为不具体的节点(文档)。

2. 所有现代浏览器都支持事件冒泡, 但在实现上还是有一些差异。

3. IE5.5以及更早版本中的事件冒泡会跳过html元素，从body直接到document(都不需要考虑了)

4. IE9、Firefox、Chrome、Safari则将事件一直冒泡到window对象

### 事件捕获

1. 即事件开始时由不太具体的节点接受，然后逐级向下传播到较为具体的节点。

2. IE9、Safari、Chrome、Opera和Firefox都支持这种事件流模型。 

3. 尽管"DOM2级事件"规范要求事件应该由document对象开始传播，但这些浏览器都是从window对象开始捕获事件的。

### DOM事件流

1. "DOM2级事件" 规定的事件流包括3个阶段: 事件捕获阶段、处于目标阶段和事件冒泡阶段

2. 以最简单的html为例, 单击<div>元素后：

```
<html>
	<head>
	</head>
	<body>
		<div>1</div>		
	</body>
</html>

document->html->body这是事件捕获阶段
div->body->html->document这是事件冒泡阶段

```

3. 在DOM事件流中，实际的目标(div)在捕获阶段是不会接收到事件。这意味着在捕获阶段，事件从document->html->body后就停止了。

4. 下一个阶段是"处于目标阶段", 于是事件在div上发生，并在事件处理中被看成冒泡阶段的一部分。然后冒泡阶段发生，事件又传播回文档。

5. 即使"DOM2级事件"规范明确要求捕获阶段不会涉及事件目标，但是IE9、Safari、Firefox、Opera9.5、Chrome及更高版本都会在捕获阶段触发事件对象上的事件。结果，就是有两个机会在目标对象上操作事件。



## 事件处理程序

> 事件就是用户或浏览器自身执行的某种动作。比如click、load和mouseover，都是事件的名字。而响应某个事件的函数就叫**事件处理程序**(或事件监听器)。为事件指定事件处理程序的方式有好几种。

### HTML事件处理程序

1. 某个元素支持的每种事件，都可以使用一个与  相应事件处理程序  同名  的  HTML特性  来指定。这个HTML特性的值是可以执行的Javascript代码。 

```
<input type="button" value="Click Me" onclick="alert('Clickd');" />
```

2. 由于这个值是Javascript, 因此不能在其中使用未转义的HTML语法字符。例如<code>&、""、<、></code>,如果想要使用这些字符，就必须得转义。

3. 事件处理程序中的代码在执行时，有权访问全局作用域中的任何代码。

4. 第一个缺点，存在时差问题，因为用户可能会在HTML元素一出现就触发响应的事件，但当时的事件处理程序有可能不具体执行条件，这样就会引发错误。解决的办法就是用一个try-catch块包括起来。

5. 第二个缺点，这样扩展事件处理程序的作用域在不同浏览器中会导致不同的结果。不同Javascript引擎遵循的标识符解析规则有一点儿差异。

6. 第三个缺点，HTML代码和Javascript代码耦合。

### DOM0级事件处理程序



